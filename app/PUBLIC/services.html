<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Services | Admin</title>
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
<div class="dashboard" style="display:flex;">
    <aside class="sidebar">
        <h2>The Shots</h2>
        <ul>
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="bookings.html">Bookings</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="register.html">Clients</a></li>
            <li><a href="login.html">Logout</a></li>
        </ul>
    </aside>

    <main class="main-content">
        <h1>Manage Services</h1>

        <input type="text" id="serviceName" placeholder="Service Name">
        <button id="addServiceBtn">Add Service</button>

        <table id="servicesTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Service Name</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </main>
</div>

<script>
function loadServices() {
    fetch("/api/services")
        .then(res => res.json())
        .then(data => {
            const tbody = document.querySelector("#servicesTable tbody");
            tbody.innerHTML = "";
            data.forEach(s => {
                const row = document.createElement("tr");
                row.innerHTML = `<td>${s.id}</td><td>${s.name}</td>`;
                tbody.appendChild(row);
            });
        });
}

document.getElementById("addServiceBtn").addEventListener("click", () => {
    const name = document.getElementById("serviceName").value;
    fetch("/api/services", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name })
    }).then(() => {
        document.getElementById("serviceName").value = "";
        loadServices();
    });
});

loadServices();
</script>
</body>
</html>
